This is a sample python client on top of the generated assisted-installer python library to ease working with assisted installer

Available features:

- create/delete cluster (autoinjecting pull secret file and ssh public key)
- create/download discovery iso
- list cluster/hosts
- update hostnames and host roles
- update cluster attributes such as api vip and ingress vip 
- launch cluster install

# Deploying

## Cli

You first need to install the assisted-installer autogenerated python library, with the following steps:

```
ENGINE="docker"
$ENGINE run -v $PWD:/here --rm quay.io/ocpmetal/assisted-service:latest cp -r /clients/assisted-service-client-1.0.0.tar.gz /here
tar zxvf assisted-service-client-1.0.0.tar.gz
cd assisted-service-client-1.0.0
python3 setup.py install
```

Then you can install the cli with

```
python3 setup.py install
```

## Assisted installer Plan

To deploy assisted installer, you can use kcli with the provided plan in the kcli_plan directory

```
cd kcli_plan
kcli create plan
``` 

# How to use

## Setting target url

You need to indicate a target AI_URL, which can be done with the flag *--url*

The url is in this format `http://$AI_IP:8080` 

Alternatively, you can set it as an environment variable

## Parameters

For most of the commands, you can pass parameters either on the command line by repeating `-P key=value` or by putting them in a parameter file, in yaml format.

If present, the file  `ai_parameters.yml` is also parsed.

## Using the cli

### Help

```
aicli -h
```

### List 

```
aicli list cluster
```

## Creating/Deleting a cluster

```
aicli create cluster myclu
```

```
aicli delete cluster myclu
```

## Handling iso

```
aicli create iso myclu
aicli download iso myclu
```
